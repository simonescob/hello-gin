version: 1.0
runtime: docker
build:
  commands:
    build:
      - docker build -t hello-gin .
      - docker tag hello-gin:latest hello-gin:${BUILD_NUMBER}
  network: default
run:
  network:
    port: 8080
  environment:
    - name: PORT
      value: "8080"
    - name: ENVIRONMENT
      value: "production"
    - name: LOG_LEVEL
      value: "info"
  healthcheck:
    path: /health
    interval: 30s
    timeout: 5s
    healthy_threshold: 3
    unhealthy_threshold: 3